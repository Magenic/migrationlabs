@{
    ViewData["Title"] = "PicShare!";
}

<form class="form-inline" data-bind="submit: searchPics">
    <div class="form-group has-feedback">
        <label class="sr-only" for="imageSearch">Search</label>
        <div class="input-group">
            <span class="input-group-addon">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
            </span>
            <input id="imageSearch" type="search" data-bind="textInput: searchText"
                   class="form-control" placeholder="Search images" 
                   aria-describedby="inputSuccess2Status">
        </div>
    </div>
    <button type="submit" class="btn btn-default">Search</button>
</form>

<section data-bind="visible: shouldShowUpload">
    <h1>Upload a Pic!</h1>
    <form id="uploadForm" data-bind="submit: upload" method="post" enctype="multipart/form-data"
          asp-controller="Pictures" asp-action="PostPicture">
        <div class="form-group">
            <label for="image">Image:</label>
            <input id="image" name="image" type="file" />
        </div>
        <div class="form-group">
            <label for="caption">Caption:</label>
            <input id="caption" name="caption" type="text" placeholder="Caption" class="form-control" />
        </div>
        <button type="submit" class="btn btn-primary">Upload</button>
    </form>
</section>

<section id="searchResults">
    <h1>Results <span data-bind="text: pics().length"></span></h1>
    <div class="picsContainer" data-bind="foreach: pics">
        <div class="picResult">
            <img alt="" data-bind="attr: { src: filePath }" class="img-responsive" />
            <p data-bind="text: caption"></p>
        </div>
    </div>
</section>